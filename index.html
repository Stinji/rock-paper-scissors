<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Rock Paper Scissors</title>
</head>

<body onload="game()">
    <script>
        function computerPlay() {
            myArray = ["rock", "paper", "scissors"];
            let x = Math.floor(Math.random() * 3);
            return myArray[x];
        }

        let computerScore;
        let computerSelection;
        let playerSelection;
        let playerScore;
        let round = 1;

        function singleRound(playerSelection, computerSelection) {
            playerSelection = prompt("Round: " + round + "\nRock, Paper or Scissors?").toLowerCase();
            computerSelection = computerPlay();

            if (playerSelection == "rock") {
                if (computerSelection == "scissors") {
                    ++playerScore;
                    console.log("You Win! " + playerSelection + " beats " + computerSelection + ".");
                } else if (computerSelection == "paper") {
                    ++computerScore;
                    console.log("You Lose! " + computerSelection + " beats " + playerSelection + ".");
                } else {
                    console.log("It's a tie, try again.");
                    singleRound();
                }
            } else if (playerSelection == "paper") {
                if (computerSelection == "rock") {
                    ++playerScore;
                    console.log("You Win! " + playerSelection + " beats " + computerSelection + ".");
                } else if (computerSelection == "scissors") {
                    ++computerScore;
                    console.log("You Lose! " + computerSelection + " beats " + playerSelection + ".");
                } else {
                    console.log("It's a tie, try again.");
                    singleRound();
                }
            } else if (playerSelection == "scissors") {
                if (computerSelection == "paper") {
                    ++playerScore;
                    console.log("You Win! " + playerSelection + " beats " + computerSelection + ".");
                } else if (computerSelection == "rock") {
                    ++computerScore;
                    console.log("You Lose! " + computerSelection + " beats " + playerSelection + ".");
                } else {
                    console.log("It's a tie, try again.");
                    singleRound();
                }
            } else {
                console.log("Please only enter 'rock', 'paper' or 'scissors'.");
                singleRound();
            }
        }

        function game() {
            playerScore = 0;
            computerScore = 0;

            alert("Welcome to: \"Rock, Paper, Scissors - Man versus Machine!\" \nYou will be playing versus the computer, the one with the most points wins.");
            alert("Good luck! \nYou'll need it...");
            for (i = 0; i < 5; i++) {
                singleRound();
                console.log("Player: " + playerScore + " - Computer: " + computerScore);
                ++round;
            }
            if (playerScore > computerScore) {
                console.log("You won the game!");
            } else if (playerScore < computerScore) {
                console.log("You lost the game!");
            } else {
                console.log("Something unexpected happened.");
            }
        }
    </script>
</body>

</html>